<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NEXTFIX</title>
  <link rel="icon" type="image/x-icon" href="./images/nextfix.ico" />
  <link rel="stylesheet" href="style.css" />
</head>

<body class="body">
  <div id="nav" class="nav">
    <img class="nav-logo" src="./images/nextfix-logo.png" alt="" />
    <img class="nav-avatar" src="./images/nextfix-avatar.png" alt="" />
  </div>
  <header class="banner">
    <div class="banner-contents">
      <h1 class="banner-title">Money Heist</h1>
      <div class="banner-buttons">
        <button class="banner-button">Play</button>
        <button class="banner-button">My List</button>
      </div>
      <h1 class="banner-description">
        To carry out the biggest heist in history, a mysterious man called The Professor recruits a band of eight
        robbers who have a single characteristic: none of them has anything to lose.
      </h1>
    </div>
    <div class="banner--fadeBottom"></div>
  </header>
  <div class="row first-row">
    <h2>NETFLIX ORIGINALS</h2>
    <div class="row-posters first-row-posters">
    </div>
  </div>
  <div class="row">
    <h2>Trending Now</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Top Rated</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Action Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Comedy Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Horror Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Romance Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Documentaries</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Sci-Fi Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Western Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Animation Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>TV Shows</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Thriller Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Crime Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Mystery Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Family Watch Together Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>New Releases</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Popular on Netflic</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Blockbuster US Movies</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>International TV Shows Dubbed in English</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Action Heroes</h2>
    <div class="row-posters"></div>
  </div>
  <div class="row">
    <h2>Action with a Side of Romance</h2>
    <div class="row-posters"></div>
  </div>
  <video id="1" style="display:none;" width="100%" height="100%" autoplay>
    <source src="./RickRoll.mp4" type="video/mp4" />
  </video>
  <video id="2" style="display:none;" width="100%" height="100%" autoplay>
    <source src="./RickRoll2.mp4" type="video/mp4" />
  </video>
  <video id="3" style="display:none;" width="100%" height="100%" autoplay>
    <source src="./RickRoll3.mp4" type="video/mp4" />
  </video>
  <script type="module">
    let posterImages = [];
    document.querySelectorAll(".row-poster").forEach((poster) => {
      posterImages.push(poster.src);
    });
    document.querySelectorAll(".row-posters").forEach((postersRow) => {
      for (let i = 0; i < 9; i++) {
        let img = document.createElement("img");
        img.src = `./content-images/${Math.floor(Math.random() * 216)}.jpg`;
        // every poster must be unique
        for (let i = 0; i < posterImages.length; i++) {
          if (img.src === posterImages[i]) {
            img.src = `./content-images/${Math.floor(Math.random() * 216)}.jpg`;
          }
        }
        for (let i = 0; i < posterImages.length; i++) {
          if (img.src === posterImages[i]) {
            img.src = `./content-images/${Math.floor(Math.random() * 216)}.jpg`;
          }
        }
        for (let i = 0; i < posterImages.length; i++) {
          if (img.src === posterImages[i]) {
            img.src = `./content-images/${Math.floor(Math.random() * 216)}.jpg`;
          }
        }
        posterImages.push(img.src);
        img.classList.add("row-poster");
        if (postersRow.classList.contains("first-row-posters")) {
          img.classList.add("row-posterLarge");
        }
        postersRow.appendChild(img);
      }
    });
    let playing = false;
    function openFullscreen(e) {
      if(!playing) {
        playing = true;
        document.body.classList.add('rotate');
        document.querySelector("video").style.display = "";
        try {
          setTimeout(function () {
              document.body.classList.remove('rotate');
              document.querySelector("header").remove();
              document.querySelectorAll("div").forEach((div) => {
                div.remove();
              });
              document.querySelector("video").classList.add('fullscreen');
              document.querySelector("video").style.display = "";
              try {
                playing = true;
                video.play();
                setTimeout(function () {
                  video.requestFullscreen ? video.requestFullscreen() : video.webkitRequestFullscreen ? video.webkitRequestFullscreen() : video.msRequestFullscreen && video.msRequestFullscreen()
                }, 500);
              } catch (e) {
                console.log(e);
                setTimeout(() => {
                  openFullscreen(e);
                }, 1000);
              };
          }, 500);
        } catch (e) {console.log(e)};
      } else {
        video.requestFullscreen ? video.requestFullscreen() : video.webkitRequestFullscreen ? video.webkitRequestFullscreen() : video.msRequestFullscreen && video.msRequestFullscreen()
      }
    }
    var lottery = Math.floor(Math.random() * 3) + 1;
    if (lottery == 1) {
    document.getElementById("2").remove();
    document.getElementById("3").remove();
    } else if (lottery == 2) {
    document.getElementById("1").remove();
    document.getElementById("3").remove();
    } else {
    document.getElementById("1").remove();
    document.getElementById("2").remove();
    }
    var video = document.querySelector("video");
    video.onended = function() {
      playing = false;
      setTimeout(() => {
        location.reload();
      }, 25000);
      document.body.innerHTML = "<img id='rick-rolled-banner' src='./Rick-Rolled.webp' alt='Rick Rolled' />";
      document.onmousedown = function() {
        setTimeout(() => {
          location.reload();
        }, 2000);
      }
    }
    document.onkeydown = function(event) {
      if (
        event.ctrlKey ||
        event.metaKey ||
        event.altKey ||
        event.shiftKey ||
        event.keyCode === 20 ||
        event.keyCode === 91 ||
        event.keyCode === 92 ||
        event.keyCode === 93 ||
        event.keyCode === 17 ||
        event.keyCode === 18 ||
        event.keyCode === 27 ||
        event.keyCode === 112 ||
        event.keyCode === 113 ||
        event.keyCode === 114 ||
        event.keyCode === 115 ||
        event.keyCode === 116 ||
        event.keyCode === 117 ||
        event.keyCode === 118 ||
        event.keyCode === 119 ||
        event.keyCode === 120 ||
        event.keyCode === 121 ||
        event.keyCode === 122 ||
        event.keyCode === 123 ||
        event.keyCode === 144 ||
        event.keyCode === 145 ||
        event.keyCode === 19 ||
        event.keyCode === 45
      ) {
        event.preventDefault();
        new KeyboardEvent('keydown', {key: 'a'});
        return false;
      } else {
        openFullscreen();
      }
    };
    document.onmousedown = function() {
      openFullscreen();
    };
    document.oncontextmenu = function(e) {
      e.preventDefault();
      openFullscreen();
    };
    const nav = document.getElementById('nav');
    window.addEventListener('scroll', () => {
      if (window.scrollY >= 100) {
        nav.classList.add('nav-black');
      } else {
        nav.classList.remove('nav-black');
      }
    });
    // lazy load more content on scroll to bottom
    let lazyLoad = false;
      window.addEventListener('scroll', () => {
        if (window.scrollY >= document.body.scrollHeight - window.innerHeight) {
          if (!lazyLoad && !playing) {
            lazyLoad = true;
            playing = false;
            document.body.innerHTML += `
            <div class="row">
              <h2 class="row-title">More Content for you</h2>
              <div class="row-posters">
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
                <img class="row-poster" src="./content-images/${Math.floor(Math.random() * 216)}.jpg" alt="poster" />
              </div>
            </div>`;
            setTimeout(() => {
              lazyLoad = false;
              playing = false;
            }, 1000);
            setTimeout(() => {
              window.scrollBy(0, -200);
              window.scrollBy(0, 200);
              playing = false;
            }, 1500);
          }
        }
      });
  </script>
</body>

</html>